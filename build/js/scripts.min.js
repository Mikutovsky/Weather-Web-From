let lat=57.1914,lon=39.4139,apiKey="a9807b6fa36e4f193836a886dff829a1",weatherMeasures="current,minutely,hourly",units="metric";const myUrl=`https://api.openweathermap.org/data/2.5/onecall?\nlat=${lat}\n&lon=${lon}\n&exclude=${weatherMeasures}\n&units=${units}\n&appid=${apiKey}`;async function getData(e){try{let t=await fetch(e);return(await t.json()).daily.splice(0,4)}catch(e){console.error(e)}}function timeConverter(e,t=!0){let n=new Date(1e3*e),r=n.getFullYear(),a=n.getMonth(),i=n.getDate();return time=t?i+""+(a<10?".0"+a:"."+a)+"."+r:i+""+(a<10?".0"+a:"."+a),time}function getAverageTemp(e){let t=0,n=0;for(const r in e)"min"!==r&&"max"!=r&&(t+=e[r],n++);return Math.ceil(t/n)}function getUnixTime(e,t=0){return e[t].dt}function getCurrentDateTemp(e){return e[0].temp}function getIcons(e){return e.weather[0].icon}function findWeatherTitle(){return document.querySelector(".weather-panel__title-value")}function findCurrentDateTitle(){return document.querySelector(".current-date__info")}function findWeatherList(){return document.querySelector(".weather-panel__list")}let weatherTitle=findWeatherTitle(),currentDateTitle=findCurrentDateTitle(),weatherList=findWeatherList();getData(myUrl).then(e=>{let t=getCurrentDateTemp(e),n=getUnixTime(e);weatherTitle.textContent=getAverageTemp(t),currentDateTitle.textContent=timeConverter(n);for(let t=1;t<e.length;t++){let n=timeConverter(getUnixTime(e,t),!1),r=getIcons(e[t]);weatherList.innerHTML+=`\n        <li class="weather-panel__item">\n          <div class="weather-panel__icon"><img src="https://openweathermap.org/img/wn/${r}.png" alt=""></div>\n          <div class="weather-panel__date">${n}</div>\n        </li>\n        `}});